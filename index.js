(()=>{"use strict";var e={800:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(81),r=n.n(a),o=n(645),i=n.n(o)()(r());i.push([e.id,"button{margin:5px}",""]);const s=i},498:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(81),r=n.n(a),o=n(645),i=n.n(o)()(r());i.push([e.id,".race{display:flex;flex-direction:column}.road{border-bottom:gray dashed;display:flex;align-items:start;flex-direction:column}.flag{transform:scale(5);margin-left:calc(100% - 173px);position:absolute;margin-top:42px}.car-name{display:inline-block}.startBtn{color:green;font-weight:bold}.stopBtn{color:red;font-weight:bold}.drive{animation:drive}@keyframes drive{0%{margin-left:0}100%{margin-left:calc(100% - 170px)}}.congrats{width:100%;position:fixed;top:50%;text-align:center}.hidden{visibility:hidden}",""]);const s=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);a&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},i=[],s=0;s<e.length;s++){var c=e[s],d=a.base?c[0]+a.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var m=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var g=r(p,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var c=a(e,r),d=0;d<o.length;d++){var l=n(o[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=c}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),a=n(795),r=n.n(a),o=n(569),i=n.n(o),s=n(565),c=n.n(s),d=n(216),l=n.n(d),u=n(589),m=n.n(u),p=n(800),g={};g.styleTagTransform=m(),g.setAttributes=c(),g.insert=i().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),t()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals;const h=class{static addOne(){this.change(1)}static removeOne(){this.change(-1)}static addHungred(){this.change(100)}static setValue(e){const t=document.querySelector("#counter");null!==t&&(t.innerHTML=e.toString())}static change(e){const t=document.querySelector("#counter");if(null!==t){const n=Number(t.innerHTML),a=n?n+e:e;t.innerHTML=a.toString()}}getCurent(){let e=0;const t=document.querySelector("#counter");return null!==t&&(e=Number(t.innerHTML)),e}},y="http://127.0.0.1:3000",v=10,w=7,f="name",S="color",C="id",E="X-Total-Count",b="started",A="stopped",M="drive",x="garage",T="winners";class B{static async getEntityArr(e,t,n,a="",r=""){return 0===a.length?fetch(`${y}/${e}?_page=${t}&_limit=${n}`):fetch(`${y}/${e}?_page=${t}&_limit=${n}&_sort=${a}&_order=${r}`)}static async getEntity(e,t){const n=await fetch(`${y}/${t}/${e}`);if(200===n.status)return await n.json()}static async newEntity(e,t){return await fetch(`${y}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}static async updateEntity(e,t,n){const a=await fetch(`${y}/${n}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await a.json()}static async deleteEntity(e,t){return await fetch(`${y}/${t}/${e}`,{method:"DELETE"})}}B.engineAction=async(e,t)=>await fetch(`${y}/engine?id=${e}&status=${t}`,{method:"PATCH"});const q=B,R=["M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6\n-10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91\n-250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340\n-49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3\n-150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418\n0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64\n-126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622\n756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302\n140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263\nl-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22\n259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239\n-63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1\n-116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45\n525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50\n680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0\n-226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332\n-208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341\n10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66\n-422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36\n-485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83\n54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12\n-67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134\n274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11\n-27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z","M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262\n-467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493\n-551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23\n86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50\n-354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220\n1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360\n0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z","M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120\n-114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z","M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28\n22 c-34 28 -138 70 -193 79 l-40 7 0 -162z","M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0\n165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z","M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0\n165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z","M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29\n58 -13 0 -29 -8 -34 -18z","M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57\n9 153 -71 153 -27 0 -44 -8 -66 -29z","M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16\n-54 -2z","M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67\n-62 36z","M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123\n113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z","M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71\n195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z","M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25\n-70 0z","M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7\n0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z","M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223\n232 -230 231 -3 0 -11 -3 -17 -6z","M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24\n-411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118\n380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86\n-407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96\n33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176\n238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207\n81 364 77 109 -3 143 -7 210 -30z","M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80\n119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z","M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20\n-163 84 -207 91 l-43 7 0 -162z","M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0\n165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z","M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45\n-88 241 -108 241 -4 0 -57 -51 -119 -112z","M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64\n-10 68 -14 2 -31 -3 -38 -10z","M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0\n-44 -6 -64 -31z","M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\n-54 2z","M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13\n-24 13 -3 0 -14 -6 -24 -13z","M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120\n109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z","M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177\n79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z","M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43\n-67 12z","M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108\n10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115\n-113z","M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186\n61 239 98 16 10 -216 242 -234 235z"],$=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","128.000000pt"),t.setAttribute("height","64.000000pt"),t.setAttribute("fill","none"),t.setAttribute("viewBox","0 0 1280.000000 440.000000"),t.setAttribute("preserveAspectRatio","xMidYMid meet");const n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("transform","translate(0.000000,640.000000) scale(0.080000,-0.080000)"),n.setAttribute("fill",e),R.forEach((e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",e),n.appendChild(t)})),t.appendChild(n),t},L=class{constructor(e){this.sortType="id",this.sortOrder="ASC",this.sortMap=new Map(Object.entries({id:"Number",wins:"Wins",time:"Best Time (seconds)"})),this.writeWinner=async e=>{const{id:t,time:n}=e;let a=await q.getEntity(t,T);void 0!==a?(a.wins=(Number(a.wins)+1).toString(),n<Number.parseFloat(a.time)&&(a.time=n.toString()),await q.updateEntity(Number(t),a,T)):(a={id:t,time:n.toString(),wins:"1"},await q.newEntity(a,T))},this.deleteWinner=async e=>{await q.deleteEntity(e,T)},this.drawWinner=async()=>{const e=await this.getWinners(),{winners:t,winnerCount:n}=e,a=document.createElement("table"),r=this.getHead(["Number","Car","Name","Wins","Best Time (seconds)"]);a.append(r);const o=this.getBody(t);return a.append(o),this.pagination.limitPage=Math.ceil(n/v),h.setValue(n),this.pagination.lockBtn(),a},this.pagination=e}async getWinners(){const e=await q.getEntityArr(T,this.pagination.page,v,this.sortType,this.sortOrder),t=e.headers.get(E),n=null!==t?Number(t):0;return{winners:await e.json(),winnerCount:n}}getBody(e){const t=document.createElement("tbody"),n=new N(this.pagination);return e.forEach((async e=>{const a=void 0!==e.id?e.id:"",r=await this.getRow(a,e,n);t.append(r)})),t}getHead(e){const t=document.createElement("thead"),n=document.createElement("tr"),a=[...this.sortMap.values()],r=[...this.sortMap.keys()];return e.forEach((e=>{const t=document.createElement("th");if(t.innerText=e,a.includes(e)){const n=a.indexOf(e),o=r[n];t.dataset.sortType=o,t.dataset.sortOrder=this.sortOrder,t.addEventListener("click",(async e=>{await this.sort(e)}))}n.append(t)})),t.append(n),t}async reDrawWinner(){const{winners:e}=await this.getWinners(),t=this.getBody(e);document.querySelector("tbody")?.remove(),document.querySelector("table")?.append(t),this.pagination.lockBtn()}async getRow(e,t,n){const a=document.createElement("tr"),r=void 0!==t.id?t.id:"",o=await n.getCar(r),i=$(o.color),s=document.createElement("td");s.innerText=e,a.append(s);const c=document.createElement("td");return c.append(i),a.append(c),[o.name,t.wins,t.time].forEach((e=>{const t=document.createElement("td");t.append(e),a.append(t)})),a}async sort(e){if(null!==e.target){const t=e.target,n=t.dataset;this.sortType=n.sortType;const{sortOrder:a}=n;this.sortOrder="ASC"===a?"DESC":"ASC",t.dataset.sortOrder=this.sortOrder,await this.reDrawWinner()}}},N=class{constructor(e){this.pagination=e}async getCar(e){return await q.getEntity(e,x)}async newCar(e){const t=e.target,n=t.querySelector("#newCarColor"),a=t.querySelector("#newCarName"),r={name:"",color:""};null!==n&&null!==a&&(r.color=n.value,r.name=a.value),await q.newEntity(r,x).then((async()=>{await this.reDrawRace()})).then((()=>{h.addOne()}))}async updateCar(e){e.preventDefault();const t=e.target,n=t.querySelector("#updCarId"),a=t.querySelector("#updCarColor"),r=t.querySelector("#updCarName"),o={name:"",color:""};null!==a&&null!==r&&(o.color=a.value,o.name=r.value);const i=null!==n?n.value:0,s=await q.updateEntity(Number(i),o,x);if(void 0!==s.id){const e=document.querySelector(`[data-car-id='${s.id}']`);if(null!==e){e.querySelector("g").setAttribute("fill",s.color),e.dataset.carName=s.name;const t=document.querySelector(`[data-car-block-id='${s.id}']`);if(null!==t&&null!==(null!==t.querySelector(".car-name"))){const e=t.querySelector(".car-name");null!==e&&(e.innerHTML=s.name)}}}}async reDrawRace(){document.querySelector("#race")?.remove(),document.querySelector("#content")?.append(await this.drawRace())}async deleteCar(e){if(200===(await q.deleteEntity(e,x)).status){const t=new L(this.pagination);await t.deleteWinner(e),await this.reDrawRace(),h.removeOne()}}startStopBtnTogle(e,t,n){const a=document.querySelector(`#startBtn${e}`),r=document.querySelector(`#stopBtn${e}`);null!==a&&null!==r&&(a.disabled=t,r.disabled=n)}async runCar(e){const t=await q.engineAction(e,b);if(200===t.status){const{distance:n,velocity:a}=await t.json();this.startStopBtnTogle(e,!0,!1);const r=document.querySelector(`[data-car-id='${e}']`);if(null!==r){const t=Number(n)/Number(a);return r.classList.toggle("drive"),r.style.animationDuration=`${t.toFixed()}ms`,r.style.marginLeft="calc(100% - 170px)",await q.engineAction(e,M).then((n=>{if(200===n.status)return{id:e,time:t};throw r.style.animationPlayState="paused",Error("Engine broken")}))}}}async stopCar(e){if(200===(await q.engineAction(e,A)).status){this.startStopBtnTogle(e,!1,!0);const t=document.querySelector(`[data-car-id='${e}']`);null!==t&&(t.style.animationPlayState="running",t.classList.toggle("drive"),t.style.marginLeft="0")}}async race(){const e=document.querySelector("#resetBtn"),t=document.querySelector("#startRaceBtn");null!==e&&null!==t&&(e.disabled=!1,t.disabled=!0);const n=[...document.querySelectorAll("svg")].map((e=>e.dataset.carId)).map((e=>void 0!==e?this.runCar(e.toString()):new Promise((()=>{})))),a=await Promise.any(n);if(void 0!==a){const e=new L(this.pagination);a.time=Number.parseFloat((a.time/1e3).toFixed(2)),await e.writeWinner(a),this.showWinnerRace(a)}}reset(){const e=document.querySelector("#resetBtn");null!==e&&(e.disabled=!0);const t=[...document.querySelectorAll("svg")].map((e=>e.dataset.carId)).map((e=>void 0!==e?this.stopCar(e.toString()):new Promise((()=>{}))));Promise.all(t).then((()=>{const e=document.querySelector("#startRaceBtn");null!==e&&(e.disabled=!1)})),this.winnerMessageTogle()}showWinnerRace({id:e,time:t}){const n=document.querySelector(`[data-car-id='${e}']`);if(null!==n&&void 0!==n.dataset.carName){const e=`${n.dataset.carName} went first ${t}s`;this.winnerMessageTogle(e)}}winnerMessageTogle(e=""){const t=document.querySelector(".congrats");null!==t&&(t.classList.toggle("hidden"),t.innerText=e)}async drawRace(){const e=await q.getEntityArr(x,this.pagination.page,w),t=await e.json(),n=this.getRace();t.forEach((e=>{const t=this.getCarBlock(e);n.append(t)}));const a=e.headers.get(E);if(null!==a){const e=Number(a);this.pagination.limitPage=Math.ceil(e/w),h.setValue(e)}return this.pagination.lockBtn(),n}getCarBlock(e){const t=document.createElement("div");t.dataset.carBlockId=e.id;const n=document.createElement("button");n.innerText="Update",n.addEventListener("click",(()=>this.toUpdate(e.id)));const a=document.createElement("button");a.innerText="Remove",a.addEventListener("click",(()=>this.deleteCar(e.id)));const r=document.createElement("p");r.innerText=e.name,r.classList.add("car-name");const o=document.createElement("div");o.append(n),o.append(a),o.append(r);const i=$(e.color);i.dataset.carId=e.id,i.dataset.carName=e.name;const s=document.createElement("div"),c=document.createElement("div");c.append(this.getStartBtn(e.id)),c.append(this.getStopBtn(e.id)),s.append(c),s.append(i),s.classList.add("road");const d=document.createElement("span");return d.innerText="🏁",d.classList.add("flag"),s.append(d),t.append(o),t.append(s),t}getStartBtn(e){const t=document.createElement("button");return t.id=`startBtn${e}`,t.classList.add("startBtn"),t.innerHTML="R",t.addEventListener("click",(async()=>{await this.runCar(e)})),t}getStopBtn(e){const t=document.createElement("button");return t.id=`stopBtn${e}`,t.classList.add("stopBtn"),t.innerHTML="S",t.disabled=!0,t.addEventListener("click",(async()=>{await this.stopCar(e)})),t}getRace(){const e=document.createElement("section");return e.id="race",e.classList.add("race"),e}getValueFromSession(e){return void 0===sessionStorage[e]?"":sessionStorage.getItem(e)}getForm(e){const t=document.createElement("form");t.id=`${e}Car`;const n=document.createElement("input");n.type="text",n.id=`${e}CarName`,n.name="name";const a=`${f}${e}`,r=this.getValueFromSession(a);null!==r&&(n.value=r),n.addEventListener("input",(e=>{const t=e.target;sessionStorage.setItem(a,t.value)}));const o=document.createElement("input");o.type="color",o.id=`${e}CarColor`,o.name="color";const i=`${S}${e}`,s=this.getValueFromSession(i);null!==s&&(o.value=s),o.addEventListener("input",(e=>{const t=e.target;sessionStorage.setItem(i,t.value)}));const c=document.createElement("button");return c.type="submit",t.append(n),t.append(o),t.append(c),t}getNewForm(){const e=this.getForm("new"),t=e.querySelector("button");return null!==t&&(t.innerText="Add"),e.addEventListener("submit",(e=>this.newCar(e))),e}getUpdForm(){const e=this.getForm("upd");e.addEventListener("submit",(async e=>await this.updateCar(e)));const t=document.createElement("input");t.type="text",t.id="updCarId";const n=`${C}upd`;t.value=`${this.getValueFromSession(n)}`,t.style.visibility="hidden";const a=e.querySelector("button");return null!==a&&(a.innerText="Update"),e?.append(t),e}toUpdate(e){const t=document.querySelector(`[data-car-id='${e}']`);if(null!==t){const n=t.dataset.carName,a=t.querySelector("g").getAttribute("fill"),r=document.querySelector("#updCar");if(null!==t&&void 0!==n&&null!==a&&null!==r){const t=`${C}upd`;sessionStorage.setItem(t,e);const o=`${f}upd`;sessionStorage.setItem(o,n);const i=`${S}upd`;sessionStorage.setItem(i,a);const s=r.querySelector("#updCarName"),c=r.querySelector("#updCarId"),d=r.querySelector("#updCarColor");null!==s&&null!==c&&null!==d&&(s.value=n,c.value=e,d.value=a)}}}},P=class{constructor(){this.page=1,this.limitPage=1,this.lockBtn=()=>{const e=document.querySelector("#prevBtn"),t=document.querySelector("#nextBtn");null!==e&&null!==t&&(1===this.page?e.disabled=!0:e.disabled=!1,this.page===this.limitPage?t.disabled=!0:t.disabled=!1)},this.getPagination=e=>{const t=document.createElement("div");t.id="paination",t.addEventListener("click",(()=>{this.lockBtn();const t=document.querySelector("#pageNum");null!==t&&(t.textContent=this.page.toString()),e()}));const n=document.createElement("button");n.innerText="Prev",n.disabled=!0,n.id="prevBtn",n.addEventListener("click",(()=>{this.page-=1}));const a=document.createElement("button");return a.innerText="Next",a.id="nextBtn",a.addEventListener("click",(()=>{this.page+=1})),t.append(n),t.append(a),t}}},z=new Map;z.set("Audi",["100","80","90","A1","A2","A3","A4","A5","A6","A7","A8","Cabriolet","E-tron"]),z.set("BMV",["M2","M3","M4","M5","M6","M8","X1","X2","X3","X4","X5","X6","X7","Z1","Z3","Z4","Z8","i3","i8"]),z.set("Ford",["Aerostar","Aspire","Bronco","C-Max","Contour","Cougar","Crown","EcoSport","Econoline","Edge","Escape","Escort","Excursion","Expedition","Explorer","F-150","F-350"]),z.set("Honda",["Accord","Avancier","CR-V","CR-Z","CRX","Capa","City","Civic","Concerto","Crosstour","Domani","Element","F-MX","FR-V","Fit","Freed","HR-V","Insight","Inspire"]),z.set("Skoda",["Fabia","Favorit","Felicia","Kamiq","Karoq","Kodiaq","Octavia","Praktik","Rapid","Roomster","Scala","Superb","Yeti"]),z.set("Nissan",["200","300","350","AD","Almera","Altima","Ariya","Armada","Atleon","Avenir","Bassara","Bluebird","Cabstar","Cedric","Cefiro","Cima"]),z.set("Mitsubishi",["3000","ASX","Airtrek","Aspire","Canter","Carisma","Challenger","Chariot","Colt","Debonair","Delica","Diamante","Dingo","Dion","EK","Eclipse","Emeraude"]),z.set("Lexus",["CT","ES","GS","GX","HS","IS","LC","LFA","LS","LX","NX","RC","RX","SC","UX"]),z.set("Toyota",["4runner","Allex","Allion","Alphard","Altezza","Aristo","Aurion","Auris","Avalon","Avensis","Aygo","BB","Belta","Blade","Blizzard","Brevis"]),z.set("Volkswagen",["Amarok","Arteon","Beetle","Bora","Caddy","California","Caravelle","Corrado","Crafter","Cross","CrossGolf","CrossPolo","Eos","Fox","Golf","Jetta"]);const k=z;class F{static getRandomFromArr(e){return e[this.getRandom(e.length-1)]}static getPartColor(){const e=this.getRandom(255).toString(16);return 1===e.length?`0${e}`:e}static getRandomColor(){return`#${this.getPartColor()}${this.getPartColor()}${this.getPartColor()}`}static getRamdomCarName(){const e=[...k.keys()],t=this.getRandomFromArr(e);let n=[];const a=k.get(t);return void 0!==a&&(n=a),`${t} ${this.getRandomFromArr(n)}`}static getRandomCar(){return{name:this.getRamdomCarName(),color:this.getRandomColor()}}}F.getRandom=e=>Math.floor(Math.random()*e);const W=F;var I=n(498),O={};O.styleTagTransform=m(),O.setAttributes=c(),O.insert=i().bind(null,"head"),O.domAPI=r(),O.insertStyleElement=l(),t()(I.Z,O),I.Z&&I.Z.locals&&I.Z.locals;(new class{async start(){const e=new class{constructor(){this.getPageName=()=>{const e=document.createElement("h1");return e.innerText="Garage",e},this.getGarageCounter=()=>{const e=document.createElement("p");e.innerText="Garage: ";const t=document.createElement("span");return t.id="counter",e.append(t),e},this.getPageCounter=()=>{const e=document.createElement("p");e.innerText="Page: ";const t=document.createElement("span");return t.id="pageNum",t.textContent=this.pagination.page.toString(),e.append(t),e},this.getStartRaceBtn=()=>{const e=document.createElement("button");return e.innerText="Start Race",e.id="startRaceBtn",e.addEventListener("click",(()=>this.service.race())),e},this.getResetBtn=()=>{const e=document.createElement("button");return e.innerText="Reset",e.id="resetBtn",e.disabled=!0,e.addEventListener("click",(()=>this.service.reset())),e},this.getWinnerCongrats=()=>{const e=document.createElement("h3");return e.id="consgrats",e.innerText="CONGRATS ",e.classList.add("congrats"),e.classList.add("hidden"),e},this.pagination=new P,this.service=new N(this.pagination)}async drawRacePage(){document.querySelector("#content")?.append(this.getPageName()),document.querySelector("#content")?.append(this.service.getNewForm()),document.querySelector("#content")?.append(this.service.getUpdForm()),document.querySelector("#content")?.append(this.pagination.getPagination((()=>this.service.reDrawRace()))),document.querySelector("#content")?.append(this.getRandomBtn()),document.querySelector("#content")?.append(this.getStartRaceBtn()),document.querySelector("#content")?.append(this.getResetBtn()),document.querySelector("#content")?.append(this.getGarageCounter()),document.querySelector("#content")?.append(this.getPageCounter()),document.querySelector("#content")?.append(await this.service.drawRace()),document.querySelector("#content")?.append(this.getWinnerCongrats())}getRandomBtn(){const e=document.createElement("button");return e.innerText="Get Random Cars",e.addEventListener("click",(async()=>{const e=[];for(let t=0;t<100;t+=1){const t=W.getRandomCar(),n=q.newEntity(t,x);e.push(n)}await Promise.all(e).then((async()=>{const e=document.querySelector("#counter");null!==e&&h.setValue(Number.parseInt(e?.innerHTML,10)+100),await this.service.reDrawRace()}))})),e}},t=new class{constructor(){this.getPageName=()=>{const e=document.createElement("h1");return e.innerText="Winners",e},this.getWinnerCounter=()=>{const e=document.createElement("p");e.innerText="Winners: ";const t=document.createElement("span");return t.id="counter",e.append(t),e},this.getPageCounter=()=>{const e=document.createElement("p");e.innerText="Page: ";const t=document.createElement("span");return t.id="pageNum",t.textContent=this.pagination.page.toString(),e.append(t),e},this.pagination=new P,this.service=new L(this.pagination)}async drawWinnerPage(){document.querySelector("#content")?.append(this.getPageName()),document.querySelector("#content")?.append(this.pagination.getPagination((()=>this.service.reDrawWinner()))),document.querySelector("#content")?.append(this.getWinnerCounter()),document.querySelector("#content")?.append(this.getPageCounter()),document.querySelector("#content")?.append(await this.service.drawWinner())}},n=document.createElement("div");n.id="content",document.body.append(this.getRaceBtn((()=>e.drawRacePage()))),document.body.append(this.geWinnerBtn((()=>t.drawWinnerPage()))),document.body.append(n),await e.drawRacePage()}getRaceBtn(e){const t=document.createElement("button");return t.innerText="Race",t.id="raceBtn",t.addEventListener("click",(()=>{this.clearContent(),e()})),t}geWinnerBtn(e){const t=document.createElement("button");return t.innerText="Winners",t.id="winnerBtn",t.addEventListener("click",(()=>{this.clearContent(),e()})),t}clearContent(){const e=document.querySelector("#content");null!==e&&(e.innerHTML="")}}).start()})()})();